<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaith Team | Exam</title>

<style>
:root{
  --primary:#0284c7;
  --secondary:#0ea5e9;
  --bg:#f8fbff;
  --card:#ffffff;
  --soft:#e6f0ff;
  --question:#eef7ff;
  --option:#f9fcff;
  --success:#16a34a;
  --danger:#dc2626;
  --text:#0f172a;

  /* Brand dynamic */
  --brand1:#ffffff;
  --brand2:#e0f2fe;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Segoe UI",Tahoma,Arial,sans-serif;
  background:linear-gradient(180deg,var(--bg),#eef6ff);
  color:var(--text);
}

/* ================= HEADER ================= */
header{
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#fff;
  padding:18px;
  text-align:center;
  overflow:hidden;
}

/* ===== Brand ===== */
.logo{
  position:relative;
  font-size:28px;
  font-weight:900;
  display:inline-flex;
  align-items:center;
  gap:6px;
}

.brand-text{
  background:linear-gradient(90deg,var(--brand1),var(--brand2),var(--brand1));
  background-size:200% auto;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:shine 4s linear infinite;
}
@keyframes shine{
  0%{background-position:0%}
  100%{background-position:200%}
}

.heart{
  display:inline-block;
  animation:heartbeat 1.6s infinite ease-in-out;
}
@keyframes heartbeat{
  0%{transform:scale(1)}
  50%{transform:scale(1.25)}
  100%{transform:scale(1)}
}

/* Sparkles */
.sparkle{
  position:absolute;
  font-size:14px;
  animation:twinkle 3s infinite ease-in-out;
}
@keyframes twinkle{
  0%{opacity:0;transform:scale(.6)}
  50%{opacity:1;transform:scale(1.2)}
  100%{opacity:0;transform:scale(.6)}
}

/* Reduced motion أثناء الامتحان */
.exam .sparkle{animation-duration:5s;opacity:.4}
.exam .heart{animation-duration:2.5s}

/* After exam */
.after .sparkle{animation-duration:2s}
.after .heart{animation-duration:1.1s}

/* ================= LAYOUT ================= */
.container{max-width:520px;margin:auto;padding:16px}

/* ===== Top Bar ===== */
.top-bar{
  display:flex;
  gap:12px;
  margin-bottom:16px;
}
.progress-box{
  flex:1;
  background:var(--card);
  padding:14px;
  border-radius:18px;
  box-shadow:0 10px 22px rgba(2,132,199,.12);
}
.progress-text{
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:6px;
  font-weight:800;
  font-size:14px;
}
.progress{
  height:8px;
  background:var(--soft);
  border-radius:10px;
  overflow:hidden;
}
.progress-bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--primary),var(--secondary));
}

/* Timer */
.timer{
  width:64px;height:64px;border-radius:50%;
  background:conic-gradient(var(--primary) 0deg,var(--soft) 0deg);
  display:flex;align-items:center;justify-content:center;
  font-weight:900;font-size:14px;
  background-color:var(--card);
}

/* ================= CARD ================= */
.card{
  background:var(--card);
  padding:22px;
  border-radius:24px;
  box-shadow:0 18px 36px rgba(2,132,199,.18);
}
.question-title{
  background:var(--question);
  padding:16px;
  border-radius:16px;
  font-weight:900;
  margin-bottom:16px;
}
.option{
  background:var(--option);
  border:2px solid var(--soft);
  border-radius:18px;
  padding:15px;
  margin:12px 0;
  font-weight:700;
  cursor:pointer;
}
.option.correct{background:#eafaf1;border-color:var(--success)}
.option.wrong{background:#fff1f1;border-color:var(--danger)}
.option.disabled{pointer-events:none;opacity:.9}

button{
  margin-top:18px;
  width:100%;
  padding:15px;
  border:none;
  border-radius:20px;
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#fff;
  font-weight:900;
}

/* Feedback */
.feedback{
  text-align:center;
  font-size:22px;
  margin-bottom:10px;
  animation:pop .5s;
}
@keyframes pop{
  0%{transform:scale(.6);opacity:0}
  100%{transform:scale(1);opacity:1}
}

/* Report */
.report{
  background:var(--card);
  padding:14px;
  border-radius:14px;
  margin:10px 0;
  border-left:6px solid var(--soft);
}
.report.correct{border-color:var(--success)}
.report.wrong{border-color:var(--danger)}
</style>
</head>

<body class="exam">

<header>
  <div class="logo">
    <span class="brand-text">Gaith Team</span>
    <span class="heart">💖</span>
    <span class="sparkle" style="top:-8px;left:0">✨</span>
    <span class="sparkle" style="top:6px;right:-8px">✨</span>
    <span class="sparkle" style="bottom:-8px;left:50%">✨</span>
  </div>
  <div style="margin-top:6px;font-weight:800">الإمتحان في جيبك 👏🏻</div>
</header>

<div class="container">

  <div class="top-bar">
    <div class="progress-box">
      <div class="progress-text">
        <span id="progressText"></span>
        <span>
          ✔️ <span id="correctCount">0</span> |
          ❌ <span id="wrongCount">0</span> |
          ⏳ <span id="remainPercent">100%</span>
        </span>
      </div>
      <div class="progress">
        <div class="progress-bar" id="progressBar"></div>
      </div>
    </div>
    <div class="timer" id="timer">30:00</div>
  </div>

  <div id="app"></div>
</div>

<script>
/* ===== Questions ===== */
let questions = [
 
            // Standard MCQs (30)
            {t:"What is the color code for a 20G cannula?", o:["Green","Pink","Blue","Yellow"], a:1},
            {t:"Which cannula size is typically used for large volume replacement?", o:["14G","18G","22G","24G"], a:0},
            {t:"What is the common application for a Blue (22G) cannula?", o:["Large volume replacement","IV maintenance","Pediatrics and elderly","Neonates"], a:2},
            {t:"Which part of the cannula allows the nurse to see blood return?", o:["Catheter hub","Flashback chamber","Luer lock plug","Bushing"], a:1},
            {t:"What is the recommended angle for inserting a plastic cannula into a vein?", o:["5-10 degrees","10-30 degrees","45-60 degrees","90 degrees"], a:1},
            {t:"A Yellow cannula is sized at:", o:["20G","22G","24G","26G"], a:2},
            {t:"Which of the following is a characteristic of a good vein?", o:["Hard","Bouncy","Tortuous","Small lumen"], a:1},
            {t:"How long should a tourniquet be left on at most?", o:["1 minute","2 minutes","5 minutes","10 minutes"], a:1},
            {t:"What is the primary rationale for washing hands before the procedure?", o:["To prevent hand contamination","To prevent cross infection","To ensure patient comfort","To identify the patient"], a:1},
            {t:"Which site is preferred for short-term IV therapy?", o:["Subclavian vein","Internal jugular vein","Back of the hand","Femoral vein"], a:2},
            {t:"The smaller the gauge number of a cannula:", o:["The smaller the cannula size","The larger the cannula size","The longer the cannula","The shorter the cannula"], a:1},
            {t:"What is the rationale for using a warm pack on the vein site?", o:["To clean the area","To encourage venodilatation","To prevent infection","To reduce pain"], a:1},
            {t:"Which of these is a contraindication for site selection?", o:["Bouncy vein","Large lumen","Arm on side of mastectomy","Visible vein"], a:2},
            {t:"Where should the tourniquet be applied relative to the selected vein?", o:["1-2 cm above","8-10 cm above","8-10 cm below","Directly on the site"], a:1},
            {t:"How long should the chosen area be cleaned with alcohol?", o:["5 seconds","10 seconds","30 seconds","60 seconds"], a:2},
            {t:"What is the purpose of stretching the skin against the direction of insertion?", o:["To increase pain","To prevent air embolism","To stabilize the vein","To check for allergies"], a:1},
            {t:"Which of the following is used to flush the cannula after medication?", o:["Distilled water","Normal saline","Alcohol","Heparin"], a:1},
            {t:"In post-procedure, sharps should be discarded into:", o:["General waste bag","Sharps bin","Disposal bag","Linen bag"], a:1},
            {t:"A peripheral IV cannula is usually removed after how many days?", o:["1 day","3 days","7 days","10 days"], a:1},
            {t:"Signs of phlebitis include:", o:["Pallor and coldness","Erythema, pain, and heat","Numbness","Increased hair growth"], a:1},
            {t:"Which gauge is Green?", o:["14G","16G","18G","20G"], a:2},
            {t:"What is the rationale for checking the IV solution medical order?", o:["To prevent hand contamination","To ensure the correct IV solution","To promote safety","To check for allergies"], a:1},
            {t:"How often should an IV infusion be monitored?", o:["Every hour","Every 4 hours","Once per shift","Once a day"], a:0},
            {t:"Redness, warmth, and pain at the site may indicate:", o:["Infiltration","Infection","Normal healing","Air embolism"], a:1},
            {t:"What is the first step in preparing the patient?", o:["Apply tourniquet","Clean the site","Identify the patient and ask for name","Insert cannula"], a:2},
            {t:"Which part is used to stop blood flow when the needle is removed?", o:["Needle grip","Luer lock plug","Flashback chamber","Catheter hub"], a:1},
            {t:"During removal, pressure should be applied with a sterile swab until:", o:["The patient screams","Bleeding stops","The nurse leaves","30 minutes pass"], a:1},
            {t:"Which cannula is used for neonates specifically?", o:["Pink","Blue","Yellow","Violet (26G)"], a:3},
            {t:"What should be documented after cannulation?", o:["Only the nurse's name","Only the time","Date, time, size, and site","Patient's favorite food"], a:2},
            {t:"Which of these is NOT an indication for peripheral venous cannulation?", o:["Administration of fluids","Parenteral nutrition","Blood products","Measuring blood pressure"], a:3},

            // Critical Thinking (20)
            {t:"If a patient has a mastectomy on the left side, where should you cannulate?", o:["Left arm","Right arm","Either arm","Lower limbs only"], a:1},
            {t:"Why is the 'smaller number, larger size' rule important in emergencies?", o:["To choose the longest needle","To ensure rapid fluid resuscitation","To save money","To prevent bruising"], a:1},
            {t:"You observe swelling and coolness at the IV site. What is the most likely cause?", o:["Infection","Infiltration","Phlebitis","Normal infusion"], a:1},
            {t:"Why must you avoid areas of flexion like the wrist?", o:["The skin is too thick","Movement can dislodge or kink the cannula","Veins are not visible","It is more painful"], a:1},
            {t:"What is the priority action if you see blood in the flashback chamber?", o:["Remove the cannula","Advance the needle further","Slightly advance the needle and withdraw the inner needle","Apply a tourniquet"], a:2},
            {t:"Why is it necessary to flush with saline between different medications?", o:["To keep the patient hydrated","To prevent drug interactions or precipitation","To clean the syringe","To check for leaks"], a:1},
            {t:"A patient is allergic to adhesive plaster. What is your alternative?", o:["Don't secure the cannula","Use paper tape or non-allergenic dressing","Hold it by hand","Use a bandage tightly"], a:1},
            {t:"Why is 'milking the vein upward' performed?", o:["To clean the skin","To improve venous access and filling","To check for pulses","To reduce swelling"], a:1},
            {t:"If a vein is tortuous (not straight), why is it avoided?", o:["It is too deep","It is difficult to advance the catheter","It has no blood","It is too bouncy"], a:1},
            {t:"Why is the expiration date of the infusion bottle checked?", o:["To check the price","To prevent ineffective or toxic compound administration","To see the manufacturer","To check the volume"], a:1},
            {t:"What is the risk of leaving a tourniquet on for more than 2 minutes?", o:["Improved access","Hemoconcentration or tissue damage","Faster cannulation","Better patient comfort"], a:1},
            {t:"Why do we use 'clean and sterile gloves' during the procedure?", o:["To look professional","To prevent hand contamination and cross infection","Because they are cheaper","To keep hands warm"], a:1},
            {t:"A patient has hematomas on the right forearm. Where should you look next?", o:["The same area","Left forearm or higher up the right arm","Lower legs","Jugular vein"], a:1},
            {t:"Why is the drip chamber filled at least halfway?", o:["To save fluid","To prevent air from entering the tubing","To count drops easier","To check for color"], a:1},
            {t:"What is the clinical significance of a 'bouncy' vein?", o:["It is likely to collapse","It indicates good health and easy access","It is an artery","It should be avoided"], a:1},
            {t:"Why must the needle be fully removed before connecting the IV line?", o:["To prevent needle stick injury","To allow the catheter to function and prevent trauma","To save the needle","To check for blood"], a:1},
            {t:"Why is the patient asked to open and close their fist?", o:["To test muscle strength","To encourage venous filling and distension","To distract them from pain","To check for consent"], a:1},
            {t:"What happens if you use a 14G cannula on a neonate?", o:["Perfect fit","Severe vessel trauma and pain","No blood flow","Faster recovery"], a:1},
            {t:"Why is the cannula labeled with date and time?", o:["For decoration","To track when it needs to be changed (usually 3 days)","To know the nurse's shift","To check the patient's ID"], a:1},
            {t:"Why is the arm lowered below heart level to improve access?", o:["To make the patient sleep","To increase hydrostatic pressure and fill veins","To reduce pain","To prevent infection"], a:1},

            // Scenarios (10)
            {t:"A patient needs a rapid transfusion of whole blood. Which cannula is best?", o:["Pink (20G)","Grey (16G)","Blue (22G)","Yellow (24G)"], a:1},
            {t:"You are preparing to cannulate an elderly patient with fragile veins. Which size is safest?", o:["14G","18G","22G","16G"], a:2},
            {t:"A patient complains of pain and you see a red streak along the vein. Your first action is:", o:["Increase the rate","Stop the infusion and remove the cannula","Apply a warm pack while continuing","Ignore it"], a:1},
            {t:"While inserting, you don't see blood in the flashback chamber. What should you do?", o:["Keep pushing","Pull back slightly and redirect or restart","Flush with saline","Tape it down"], a:1},
            {t:"A patient is scheduled for major surgery and needs IV maintenance. Which cannula is typical?", o:["Orange (14G)","Green (18G)","Yellow (24G)","Violet (26G)"], a:1},
            {t:"You are about to start an infusion but the bottle is cloudy. What do you do?", o:["Shake it","Use it anyway","Discard it and get a clear one","Filter it"], a:2},
            {t:"A neonate requires IV fluids. The best cannula choice is:", o:["Blue","Pink","Yellow","Green"], a:2},
            {t:"After removing a cannula, the site starts bleeding heavily. You should:", o:["Apply a band-aid","Apply firm pressure with a sterile swab","Call the doctor immediately","Restart the IV"], a:1},
            {t:"A patient is receiving chemotherapy. Which cannula is commonly used?", o:["14G","16G","22G","18G"], a:2},
            {t:"You notice the IV rate has slowed down significantly. You should first:", o:["Increase the regulator","Check for kinks in the tubing or a closed clamp","Remove the cannula","Flush with 20ml saline"], a:1},

            // True/False (5)
            {t:"The smaller the gauge number, the larger the cannula size.", o:["True","False"], a:0},
            {t:"A tourniquet should be left on for at least 5 minutes to ensure good access.", o:["True","False"], a:1},
            {t:"Cannulas should be changed every 3 days to prevent complications.", o:["True","False"], a:0},
            {t:"Infiltration is characterized by redness, heat, and pain.", o:["True","False"], a:1},
            {t:"Normal saline is used to flush the cannula to maintain patency.", o:["True","False"], a:0}
        
];



// ===== shuffle questions only =====
function shuffleQuestions(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// خلط الأسئلة فقط
shuffleQuestions(questions);

// تعريف المتغيرات الناقصة
let i = 0;
let correct = 0;
let wrong = 0;
let answers = [];
let wrongSet = [];

/* ===== Timer ===== */
let totalTime=30*60, timeLeft=totalTime;
const timerInt=setInterval(()=>{
  timeLeft--;
  let m=Math.floor(timeLeft/60), s=timeLeft%60;
  timer.innerText=`${m}:${s<10?"0":""}${s}`;
  let deg=(timeLeft/totalTime)*360;
  timer.style.background=`conic-gradient(var(--primary) ${deg}deg,var(--soft) ${deg}deg)`;
  if(timeLeft<=0){clearInterval(timerInt);finishExam();}
},1000);

/* ===== UI ===== */
function updateTop(){
  let total=questions.length;
  let answered=correct+wrong;
  progressText.innerText=`سؤال ${i+1} من ${total}`;
  progressBar.style.width=((i+1)/total*100)+"%";
  correctCount.innerText=correct;
  wrongCount.innerText=wrong;
  remainPercent.innerText=Math.round(((total-answered)/total)*100)+"%";
}

/* ===== Render ===== */
function show(){
  updateTop();
  let q = questions[i];

  app.innerHTML = `
    <div class="card">
      <div class="question-title">${q.t}</div>
      ${q.o.map((o,idx)=>`
        <div class="option" onclick="choose(${idx})">${o}</div>
      `).join("")}
    </div>
  `;
}
/* ===== Choose ===== */
function choose(v){
  if(answers[i]!=null) return;
  answers[i]=v;
  let ok=v===questions[i].a;
  ok?correct++:wrong++;
  app.innerHTML=`
    <div class="feedback">${ok?"🎉 شاطر جدًا كمل":"😅 ركّز يا سُكر"}</div>
    <div class="card">
      <div class="question-title">${questions[i].t}</div>
      ${questions[i].o.map((o,j)=>`
        <div class="option ${j===questions[i].a?"correct":j===v?"wrong":""} disabled">${o}</div>
      `).join("")}
      <button onclick="next()">التالي</button>
    </div>`;
}

/* ===== Next ===== */
function next(){
  if(i<questions.length-1){i++;show();}
  else finishExam();
}

/* ===== Finish ===== */
function finishExam(){
  document.body.classList.remove("exam");
  document.body.classList.add("after");

  let score=Math.round((correct/questions.length)*100);

  if(score>=80){
    document.documentElement.style.setProperty("--brand1","#22c55e");
    document.documentElement.style.setProperty("--brand2","#fde047");
  }else if(score>=50){
    document.documentElement.style.setProperty("--brand1","#38bdf8");
    document.documentElement.style.setProperty("--brand2","#e0f2fe");
  }else{
    document.documentElement.style.setProperty("--brand1","#fb923c");
    document.documentElement.style.setProperty("--brand2","#fed7aa");
  }

  wrongSet=[];
  let report="";
  questions.forEach((q,idx)=>{
    let ok=answers[idx]===q.a;
    if(!ok) wrongSet.push(q);
    report+=`
      <div class="report ${ok?"correct":"wrong"}">
        <b>${q.t}</b><br>
إجابتك: ${answers[idx]!=null ? q.o[answers[idx]] : "لم يتم الحل"}<br>
الصح: ${q.o[q.a]}
      </div>`;
  });

  app.innerHTML=`
    <div class="card">
      <h3>?? تقريرك</h3>
      ${report}
      ${wrongSet.length?`<button onclick="retry()">إعادة حل الغلط فقط</button>`:"<p>أنت ممتاز 👑</p>"}
    </div>`;
}

/* ===== Retry Wrong ===== */
function retry(){
  // نبدأ امتحان جديد بالأسئلة الغلط فقط
  questions = [...wrongSet];

  answers = [];
  wrongSet = [];
  i = 0;
  correct = 0;
  wrong = 0;

  // رجوع لشكل الامتحان
  document.body.classList.remove("after");
  document.body.classList.add("exam");

  show();
}

show();
</script>

</body>

</html>
