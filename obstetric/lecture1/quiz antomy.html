<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaith Team | Exam</title>

<style>
:root{
  --primary:#0284c7;
  --secondary:#0ea5e9;
  --bg:#f8fbff;
  --card:#ffffff;
  --soft:#e6f0ff;
  --question:#eef7ff;
  --option:#f9fcff;
  --success:#16a34a;
  --danger:#dc2626;
  --text:#0f172a;

  /* Brand dynamic */
  --brand1:#ffffff;
  --brand2:#e0f2fe;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Segoe UI",Tahoma,Arial,sans-serif;
  background:linear-gradient(180deg,var(--bg),#eef6ff);
  color:var(--text);
}

/* ================= HEADER ================= */
header{
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#fff;
  padding:18px;
  text-align:center;
  overflow:hidden;
}

/* ===== Brand ===== */
.logo{
  position:relative;
  font-size:28px;
  font-weight:900;
  display:inline-flex;
  align-items:center;
  gap:6px;
}

.brand-text{
  background:linear-gradient(90deg,var(--brand1),var(--brand2),var(--brand1));
  background-size:200% auto;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:shine 4s linear infinite;
}
@keyframes shine{
  0%{background-position:0%}
  100%{background-position:200%}
}

.heart{
  display:inline-block;
  animation:heartbeat 1.6s infinite ease-in-out;
}
@keyframes heartbeat{
  0%{transform:scale(1)}
  50%{transform:scale(1.25)}
  100%{transform:scale(1)}
}

/* Sparkles */
.sparkle{
  position:absolute;
  font-size:14px;
  animation:twinkle 3s infinite ease-in-out;
}
@keyframes twinkle{
  0%{opacity:0;transform:scale(.6)}
  50%{opacity:1;transform:scale(1.2)}
  100%{opacity:0;transform:scale(.6)}
}

/* Reduced motion أثناء الامتحان */
.exam .sparkle{animation-duration:5s;opacity:.4}
.exam .heart{animation-duration:2.5s}

/* After exam */
.after .sparkle{animation-duration:2s}
.after .heart{animation-duration:1.1s}

/* ================= LAYOUT ================= */
.container{max-width:520px;margin:auto;padding:16px}

/* ===== Top Bar ===== */
.top-bar{
  display:flex;
  gap:12px;
  margin-bottom:16px;
}
.progress-box{
  flex:1;
  background:var(--card);
  padding:14px;
  border-radius:18px;
  box-shadow:0 10px 22px rgba(2,132,199,.12);
}
.progress-text{
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:6px;
  font-weight:800;
  font-size:14px;
}
.progress{
  height:8px;
  background:var(--soft);
  border-radius:10px;
  overflow:hidden;
}
.progress-bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--primary),var(--secondary));
}

/* Timer */
.timer{
  width:64px;height:64px;border-radius:50%;
  background:conic-gradient(var(--primary) 0deg,var(--soft) 0deg);
  display:flex;align-items:center;justify-content:center;
  font-weight:900;font-size:14px;
  background-color:var(--card);
}

/* ================= CARD ================= */
.card{
  background:var(--card);
  padding:22px;
  border-radius:24px;
  box-shadow:0 18px 36px rgba(2,132,199,.18);
}
.question-title{
  background:var(--question);
  padding:16px;
  border-radius:16px;
  font-weight:900;
  margin-bottom:16px;
}
.option{
  background:var(--option);
  border:2px solid var(--soft);
  border-radius:18px;
  padding:15px;
  margin:12px 0;
  font-weight:700;
  cursor:pointer;
}
.option.correct{background:#eafaf1;border-color:var(--success)}
.option.wrong{background:#fff1f1;border-color:var(--danger)}
.option.disabled{pointer-events:none;opacity:.9}

button{
  margin-top:18px;
  width:100%;
  padding:15px;
  border:none;
  border-radius:20px;
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#fff;
  font-weight:900;
}

/* Feedback */
.feedback{
  text-align:center;
  font-size:22px;
  margin-bottom:10px;
  animation:pop .5s;
}
@keyframes pop{
  0%{transform:scale(.6);opacity:0}
  100%{transform:scale(1);opacity:1}
}

/* Report */
.report{
  background:var(--card);
  padding:14px;
  border-radius:14px;
  margin:10px 0;
  border-left:6px solid var(--soft);
}
.report.correct{border-color:var(--success)}
.report.wrong{border-color:var(--danger)}
</style>
</head>

<body class="exam">

<header>
  <div class="logo">
    <span class="brand-text">Gaith Team</span>
    <span class="heart">💖</span>
    <span class="sparkle" style="top:-8px;left:0">✨</span>
    <span class="sparkle" style="top:6px;right:-8px">✨</span>
    <span class="sparkle" style="bottom:-8px;left:50%">✨</span>
  </div>
  <div style="margin-top:6px;font-weight:800">الإمتحان في جيبك 👏🏻</div>
</header>

<div class="container">

  <div class="top-bar">
    <div class="progress-box">
      <div class="progress-text">
        <span id="progressText"></span>
        <span>
          ✔️ <span id="correctCount">0</span> |
          ❌ <span id="wrongCount">0</span> |
          ⏳ <span id="remainPercent">100%</span>
        </span>
      </div>
      <div class="progress">
        <div class="progress-bar" id="progressBar"></div>
      </div>
    </div>
    <div class="timer" id="timer">30:00</div>
  </div>

  <div id="app"></div>
</div>

<script>
/* ===== Questions ===== */
let questions = [
 // --- EASY: Knowledge ---
  {
    t: "The female bony pelvis is divided into two parts; which part has obstetric importance related to childbirth?",
    o: ["False pelvis", "True pelvis", "Pelvic brim", "Iliac crest"],
    a: 1
  },
  {
    t: "What is the typical shape of the 'Gynecoid' pelvis, found in 50% of women?",
    o: ["Heart shaped", "Kidney shaped", "Rounded or slightly oval", "Long and narrow"],
    a: 2
  },
  {
    t: "Which diameter of the pelvic inlet is the shortest and measures approximately 10 cm?",
    o: ["Anatomical antero-posterior diameter", "Obstetric conjugate", "Diagonal conjugate", "Transverse diameter"],
    a: 1
  },
  {
    t: "The small erectile organ located at the anterior junction of the labia minora is the:",
    o: ["Vestibule", "Hymen", "Clitoris", "Mons pubis"],
    a: 2
  },
  {
    t: "Which part of the fallopian tube is the wider portion where fertilization usually occurs?",
    o: ["Isthmus", "Infundibulum", "Ampulla", "Interstitial portion"],
    a: 2
  },
  {
    t: "The middle muscular layer of the uterus is called the:",
    o: ["Perimetrium", "Endometrium", "Myometrium", "Epimetrium"],
    a: 2
  },
  {
    t: "How many bones typically form the vault of the fetal skull?",
    o: ["3 bones", "5 bones", "7 bones", "8 bones"],
    a: 1
  },
  {
    t: "Which suture is located between the two parietal bones of the fetal skull?",
    o: ["Frontal suture", "Coronal suture", "Sagittal suture", "Lambdoid suture"],
    a: 2
  },
  {
    t: "The 'diamond-shaped' space between the coronal and sagittal sutures in the fetal skull is the:",
    o: ["Posterior fontanel", "Anterior fontanel", "Mastoid fontanel", "Sphenoid fontanel"],
    a: 1
  },

  // --- MEDIUM: Assessment / Interpretation ---
  {
    t: "A 'Platypelloid' pelvis is characterized by a pelvic brim that is:",
    o: ["Rounded", "Heart shaped", "Kidney shaped", "Oval"],
    a: 2
  },
  {
    t: "The diagonal conjugate measures 12.5 cm. How is this diameter typically measured?",
    o: ["By a pelvimeter from outside", "By vaginal examination", "By ultrasound only", "It cannot be measured"],
    a: 1
  },
  {
    t: "Which structure is responsible for protecting the symphysis pubis during intercourse?",
    o: ["Labia majora", "Mons pubis", "Clitoris", "Perineum"],
    a: 1
  },
  {
    t: "The primary functions of the ovaries include the development of the ovum and the secretion of which hormones?",
    o: ["Insulin and Glucagon", "Estrogen and Progesterone", "Thyroxine and Adrenaline", "Oxytocin and Prolactin"],
    a: 1
  },
  {
    t: "Which part of the uterus enlarges during pregnancy to form the lower uterine segment?",
    o: ["Fundus", "Cornua", "Isthmus", "Cervix"],
    a: 2
  },
  {
    t: "The 'Bartholin's glands' are located on either side of the vaginal orifice. What is their function?",
    o: ["Secreting milk", "Secreting mucus for lubrication during intercourse", "Producing eggs", "Regulating menstruation"],
    a: 1
  },
  {
    t: "An 'episiotomy' is a surgical incision made in which area to provide more space during childbirth?",
    o: ["Abdomen", "Cervix", "Perineum", "Uterine wall"],
    a: 2
  },
  {
    t: "The 'Android' pelvis is the typical male pelvis. In what percentage of white women is it found?",
    o: ["50%", "25%", "1/3 (33%)", "3%"],
    a: 2
  },
  {
    t: "Which layer of the uterus undergoes cyclical changes during menstruation?",
    o: ["Perimetrium", "Myometrium", "Endometrium", "Serous coat"],
    a: 2
  },

  // --- HARD: Problem Solving ---
  {
    t: "During labor, the bones of the fetal vault can overlap to change the shape of the head. This process is known as:",
    o: ["Engagement", "Molding", "Restitution", "Flexion"],
    a: 1
  },
  {
    t: "Which ligament is considered the most important for maintaining the position of the uterus at the level of the cervix?",
    o: ["Broad ligament", "Round ligament", "Transverse cervical (cardinal) ligament", "Ovarian ligament"],
    a: 2
  },
  {
    t: "If the obstetric conjugate is 10 cm and the true conjugate is 11 cm, what is the distance between the upper border of the symphysis pubis and the most bulging point on its back?",
    o: ["0.5 cm", "1 cm", "1.5 cm", "2 cm"],
    a: 1
  },
  {
    t: "The 'medulla' of the ovary serves what primary purpose?",
    o: ["Producing follicles", "Secreting estrogen", "Supporting framework with blood vessels and nerves", "Releasing the ovum"],
    a: 2
  },
  {
    t: "The 'Infundibulum' of the fallopian tube has fringed endings called fimbriae. What is their role?",
    o: ["Fertilizing the egg", "Transporting sperm", "Picking up the ovum from the ovary", "Nourishing the embryo"],
    a: 2
  },
  {
    t: "The 'External conjugate' diameter measures 20 cm but has 'not a true obstetric importance'. Why?",
    o: ["It is too short", "It is measured from outside the body and doesn't reflect the internal canal", "It changes during labor", "It is only present in males"],
    a: 1
  },
  {
    t: "Which type of hymen is characterized by having many small openings like a sieve?",
    o: ["Annular", "Imperforate", "Cribiform", "Septate"],
    a: 2
  },
  {
    t: "The 'False pelvis' is located below the pelvic brim and has great obstetric importance.",
    o: ["True", "False"],
    a: 1
  },
  {
    t: "The 'Ampulla' is the most common site for fertilization in the fallopian tube.",
    o: ["True", "False"],
    a: 0
  },
  {
    t: "The 'Anterior fontanel' is triangular in shape and closes by 2-6 months of age.",
    o: ["True", "False"],
    a: 1
  },
  {
    t: "The 'Myometrium' forms the main bulk of the uterus and consists of smooth muscle fibers.",
    o: ["True", "False"],
    a: 0
  },
  {
    t: "The 'Broad ligament' is a true ligament that provides the primary support for the uterus.",
    o: ["True", "False"],
    a: 1
  }
];



// ===== shuffle questions only =====
function shuffleQuestions(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

// خلط الأسئلة فقط
shuffleQuestions(questions);

// تعريف المتغيرات الناقصة
let i = 0;
let correct = 0;
let wrong = 0;
let answers = [];
let wrongSet = [];

/* ===== Timer ===== */
let totalTime=30*60, timeLeft=totalTime;
const timerInt=setInterval(()=>{
  timeLeft--;
  let m=Math.floor(timeLeft/60), s=timeLeft%60;
  timer.innerText=`${m}:${s<10?"0":""}${s}`;
  let deg=(timeLeft/totalTime)*360;
  timer.style.background=`conic-gradient(var(--primary) ${deg}deg,var(--soft) ${deg}deg)`;
  if(timeLeft<=0){clearInterval(timerInt);finishExam();}
},1000);

/* ===== UI ===== */
function updateTop(){
  let total=questions.length;
  let answered=correct+wrong;
  progressText.innerText=`سؤال ${i+1} من ${total}`;
  progressBar.style.width=((i+1)/total*100)+"%";
  correctCount.innerText=correct;
  wrongCount.innerText=wrong;
  remainPercent.innerText=Math.round(((total-answered)/total)*100)+"%";
}

/* ===== Render ===== */
function show(){
  updateTop();
  let q = questions[i];

  app.innerHTML = `
    <div class="card">
      <div class="question-title">${q.t}</div>
      ${q.o.map((o,idx)=>`
        <div class="option" onclick="choose(${idx})">${o}</div>
      `).join("")}
    </div>
  `;
}
/* ===== Choose ===== */
function choose(v){
  if(answers[i]!=null) return;
  answers[i]=v;
  let ok=v===questions[i].a;
  ok?correct++:wrong++;
  app.innerHTML=`
    <div class="feedback">${ok?"🎉 شاطر جدًا كمل":"😅 ركّز يا سُكر"}</div>
    <div class="card">
      <div class="question-title">${questions[i].t}</div>
      ${questions[i].o.map((o,j)=>`
        <div class="option ${j===questions[i].a?"correct":j===v?"wrong":""} disabled">${o}</div>
      `).join("")}
      <button onclick="next()">التالي</button>
    </div>`;
}

/* ===== Next ===== */
function next(){
  if(i<questions.length-1){i++;show();}
  else finishExam();
}

/* ===== Finish ===== */
function finishExam(){
  document.body.classList.remove("exam");
  document.body.classList.add("after");

  let score=Math.round((correct/questions.length)*100);

  if(score>=80){
    document.documentElement.style.setProperty("--brand1","#22c55e");
    document.documentElement.style.setProperty("--brand2","#fde047");
  }else if(score>=50){
    document.documentElement.style.setProperty("--brand1","#38bdf8");
    document.documentElement.style.setProperty("--brand2","#e0f2fe");
  }else{
    document.documentElement.style.setProperty("--brand1","#fb923c");
    document.documentElement.style.setProperty("--brand2","#fed7aa");
  }

  wrongSet=[];
  let report="";
  questions.forEach((q,idx)=>{
    let ok=answers[idx]===q.a;
    if(!ok) wrongSet.push(q);
    report+=`
      <div class="report ${ok?"correct":"wrong"}">
        <b>${q.t}</b><br>
إجابتك: ${answers[idx]!=null ? q.o[answers[idx]] : "لم يتم الحل"}<br>
الصح: ${q.o[q.a]}
      </div>`;
  });

  app.innerHTML=`
    <div class="card">
      <h3>?? تقريرك</h3>
      ${report}
      ${wrongSet.length?`<button onclick="retry()">إعادة حل الغلط فقط</button>`:"<p>أنت ممتاز 👑</p>"}
    </div>`;
}

/* ===== Retry Wrong ===== */
function retry(){
  // نبدأ امتحان جديد بالأسئلة الغلط فقط
  questions = [...wrongSet];

  answers = [];
  wrongSet = [];
  i = 0;
  correct = 0;
  wrong = 0;

  // رجوع لشكل الامتحان
  document.body.classList.remove("after");
  document.body.classList.add("exam");

  show();
}

show();
</script>

</body>
</html>